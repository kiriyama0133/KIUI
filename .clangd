# Prefer compile_commands.json if available (generated by CMake)
# If not available, fall back to manual configuration below
CompileFlags:
  CompilationDatabase: out/build/classic-vcpkg
  Add:
    # C++20 standard
    - -std=c++20
    # Enable C++20 standard library features
    - -D__cpp_lib_to_address=201711L
    # vcpkg include paths (includes Skia, ANGLE, Boost, etc.)
    - -isystem
    - E:/vcpkg/vcpkg/installed/x64-windows/include
    - -isystem
    - E:/vcpkg/vcpkg/installed/x64-windows/include/boost
    # Skia include paths
    # Note: Skia headers use "include/core/..." internally (relative to skia directory)
    # So we need include/skia as root for internal includes, and include/skia/include for user code
    # Order matters: skia/include must come first for user code, then skia for internal includes
    - -isystem
    - E:/vcpkg/vcpkg/installed/x64-windows/include/skia/include
    - -isystem
    - E:/vcpkg/vcpkg/installed/x64-windows/include/skia
    # Additional paths to help clangd resolve Skia internal includes
    # When SkRefCnt.h includes "include/core/SkTypes.h", it needs to find it relative to skia directory
    - -I
    - E:/vcpkg/vcpkg/installed/x64-windows/include/skia/include/core
    # Project include paths
    - -IF:/WindowsAPI/foundation/src
    - -IF:/WindowsAPI/foundation/src/hpps
    - -IF:/WindowsAPI/graphics/include
    - -IF:/WindowsAPI/SDK/include
    # Tracy profiling library (header-only, fetched via FetchContent)
    - -isystem
    - F:/WindowsAPI/out/build/classic-vcpkg/_deps/tracy-src/public
    # Windows SDK paths
    - -D_WIN32_WINNT=0x0A00
    - -DUNICODE
    - -D_UNICODE
    - -DNOMINMAX  # 禁用 Windows 的 min/max 宏，避免与 C++ 标准库和 Skia 冲突
    # MSVC compatibility
    - -fms-compatibility
    - -fms-extensions
    # Boost
    - -DBOOST_ALL_NO_LIB
    # Foundation defines
    - -DFOUNDATION_USE_ANGLE
    - -DFOUNDATION_USE_GLFW
    # Graphics defines
    - -DGRAPHICS_USE_ANGLE
    - -DGRAPHICS_USE_SKIA
  Remove:
    # Remove any conflicting flags
    - -W*

Diagnostics:
  UnusedIncludes: Relaxed
  MissingIncludes: Relaxed
  Suppress:
    - no_member_suggest  # Suppress "no member named 'X' in namespace 'std'" suggestions
    # Suppress Skia header include errors (they use relative paths that clangd can't resolve)
    - pp_file_not_found
  
Index:
  Background: Build

InlayHints:
  Enabled: Yes
  ParameterNames: Yes
  DeducedTypes: Yes